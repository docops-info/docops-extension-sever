<!DOCTYPE html>
<html lang="en">
<head>
    <title>Panels Editor</title>
    <style>
        html, body { height: 100% }
        #editor, #return { height: 50% }
    </style>
    <link rel="icon" href="/static/images/favicon.png" />
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <!-- CSS Reset -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <!-- Milligram CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" href="/static/css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://ajaxorg.github.io/ace-builds/src/ace.js"></script>
</head>
<body>
<div class='container'>
    <div class='navbar'>
        <ul>
            <li><a href='http://docops.io'>DocOps.io</a></li>
            <li><a href='/editor/index.html'>Editor</a></li>
            <li><a href='/editor/dataset.html'>Dataset</a></li>
            <li><a href='/editor/chart.html'>Chart</a></li>
            <li><a href='/editor/treechart.html'>Tree Chart</a></li>
            <li><a href='/editor/stacked.html'>Stacked</a></li>
            <li><a href='/static/echart/demo.html'>Demo Echart</a></li>
        </ul>
    </div>

    <h1>Panels Editor</h1>

<pre id="editor">
panels {
    panel{
        link="https://www.apple.com"
        label="Apple"
    }
    panel{
        link = "http://wwww.google.com"
        label = "Google Search"
    }
}
</pre>


    <script>
        let editor = ace.edit("editor");
        editor.setTheme("ace/theme/clouds");
        editor.session.setMode("ace/mode/kotlin");
        //editor.session.setMode("ace/mode/html");

        function showHTML() {
            $('#return').html(editor.getValue());
        }
        let successRes = function(data) {
            // language=html
            let obj = `<object type=\"image/svg+xml\" data=\"` + data +`\"></object>`;
            $('#return').empty().append(obj);
        }
        // or use data: url to handle things like doctype
        function showHTMLInIFrame() {
            $.ajax({
                type: "POST",
                url: "/api/panel/plain",
                data: editor.getValue(),
                success: successRes,
                error: function( jqXhr, textStatus, errorThrown ){
                    console.log( errorThrown );
                },
                dataType: "text"
            });

        }
        editor.on("input", showHTMLInIFrame);
    </script>

    <div id="return"></div>


</div>
</body>
</html>