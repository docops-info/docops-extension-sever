<!DOCTYPE html>
<html lang="en">
<head>
    <title>DocOps Extension Server</title>
    <link rel="icon" href="static/images/favicon.png" />
    <script src="https://unpkg.com/htmx.org@1.7.0"></script>
    <!-- Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <!-- CSS Reset -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.css">
    <!-- Milligram CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css">
    <link rel="stylesheet" href="static/css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.js"></script>
    <script src="https://ajaxorg.github.io/ace-builds/src/ace.js"></script>
    <script src="editor/js/theme.js"></script>
    <script>
    function fallbackCopyTextToClipboard(text) {
        var textArea = document.createElement("textarea");
        textArea.value = text;

        // Avoid scrolling to bottom
        textArea.style.top = "0";
        textArea.style.left = "0";
        textArea.style.position = "fixed";

        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();

        try {
            var successful = document.execCommand('copy');
            var msg = successful ? 'successful' : 'unsuccessful';
            console.log('Fallback: Copying text command was ' + msg);
        } catch (err) {
            console.error('Fallback: Oops, unable to copy', err);
        }

        document.body.removeChild(textArea);
    }
    function copyTextToClipboard(text) {
        if (!navigator.clipboard) {
            fallbackCopyTextToClipboard(text);
            return;
        }
        navigator.clipboard.writeText(text).then(function() {
            console.log('Async: Copying to clipboard was successful!');
        }, function(err) {
            console.error('Async: Could not copy text: ', err);
        });
    }
    function makeAdoc(text) {
        var str = "[echart]\n";
        str += "----\n";
        str += text;
        str += "\n----\n";

        return str;
    }

</script>
</head>
<body>
<div class='container'>
    <div class='navbar'>
        <ul>
            <li><a href='http://docops.io'>DocOps.io</a></li>
            <li><a data-hx-get="partials/panels.html" data-hx-target="#bod">Editor</a></li>
            <li><a data-hx-get="partials/chart.html" data-hx-target="#bod">Chart</a></li>
            <li><a data-hx-get="partials/treechart.html" data-hx-target="#bod">Tree Chart</a></li>
            <li><a data-hx-get="partials/stacked.html" data-hx-target="#bod">Stacked</a></li>
            <li><a data-hx-get="partials/mychart.html" data-hx-target="#bod">My Custom EChart</a></li>
        </ul>
    </div>

    <div id="bod"></div>
   </div>
    <script>
        document.body.addEventListener("showFrame", function (evt){
            if(typeof showHTMLInIFrame === "function"){showHTMLInIFrame();}
        });
        function downloadBlob(FileName) {
            saveData(FileName);
        }
        var saveData = (function () {
            var a = document.createElement("a");
            document.body.appendChild(a);
            a.style = "display: none";
            return function (fileName) {
                var blob = new Blob([editor.getValue()], {type: "octet/stream"}),
                    url = window.URL.createObjectURL(blob);
                a.href = url;
                a.download = fileName;
                a.click();
                window.URL.revokeObjectURL(url);
            };
        }());
    </script>
</body>
</html>
