include::_base.adoc[]
:enable-navigation:
:page-navigation: true
:next-page-title: Architecture
:next-page-url: arch.html
= DocOps ADR


reactions::[role=right]


[[top]]
include::shared/buttons.adoc[]

== Showcase

link:adrshowcase.html[Showcase,target=_blank]

== Introduction

<<Examples,Just take me to the examples>>


Architecture Decision Records (ADRs) are documents that capture significant design choices made during software development. They provide a structured way to record the context, rationale, and consequences of these decisions, ensuring future understanding and traceability. Essentially, ADRs act as a log of important architectural choices, helping teams understand why a system is designed the way it is.

=== What are Architecture Decision Records?

ADRs are typically short, concise documents (often one or two pages) that describe a specific architectural decision. They detail the decision itself, the context surrounding it (constraints, stakeholder input, etc.), the potential consequences (both positive and negative), and the status of the decision (e.g., proposed, accepted, superseded).

[.back-to-top]
<<top, üîù>> 

=== Why are ADRs useful?

* *Contextual understanding:* ADRs help current and future team members understand the reasoning behind design choices, even years later.
* *Improved communication:* They facilitate better communication and collaboration by providing a shared understanding of architectural decisions.
* *Traceability:* ADRs allow teams to trace back to the reasons for specific design choices, making it easier to adapt and evolve the system.
* *Reduced re-work:* By documenting decisions and their justifications, ADRs can prevent redundant discussions and re-evaluation of the same issues.
* *Onboarding new team members:* ADRs provide a quick and efficient way for new team members to get up to speed on the system's architecture.

[.back-to-top]
<<top, üîù>> 

=== How are ADRs used?


ADRs are often stored alongside the code in a repository (e.g., as Markdown files) and can be integrated with project management tools.

=== Key characteristics of ADRs

* *Immutability:* Once accepted, ADRs are generally considered immutable, meaning they are not changed directly. If a decision needs to be revisited, a new ADR is created to supersede the previous one.
* *Conciseness:* ADRs are meant to be concise and to the point, focusing on the key aspects of the decision.
* *Focus on the "why":* The primary goal is to capture the rationale behind the decision, not just the decision itself.

[.back-to-top]
<<top, üîù>> 

=== The DocOps ADR Extension

The DocOps ADR (Architecture Decision Record) Extension allows you to create visually appealing architecture decision records in your AsciiDoctor documents. It provides a structured format for documenting important architectural decisions, their context, and consequences.

This guide will help you understand the basic concepts of ADRs, how to include them in your AsciiDoctor documents, and provide examples of different types of ADR visualizations.

[.back-to-top]
<<top, üîù>> 

== Basic Concepts

=== What are DocOps Architecture Decision Records?

Architecture Decision Records (ADRs) in the DocOps extension are SVG-based graphical elements that can be included in your AsciiDoctor documents. Each ADR has:

* A title (the main heading of the ADR)
* Status (Proposed, Accepted, Superseded, Deprecated, or Rejected)
* Date of the decision
* Context (the factors that influenced the decision)
* Decision (the actual decision made)
* Consequences (the results of the decision)
* Participants (the people involved in making the decision)
* References (optional links to related resources)

The extension supports various display options, including:

* Light mode (default)
* Dark mode
* Different status colors

[.back-to-top]
<<top, üîù>> 

=== ADR Components

An ADR includes:

* A title
* Status and date information
* Context section
* Decision section
* Consequences section
* Participants section with stick figure representations
* References section with clickable links to related resources (optional)

[.back-to-top]
<<top, üîù>> 

== AsciiDoctor Syntax for ADRs

To include ADRs in your AsciiDoctor document, you use a special macro syntax. Here's the basic format:

[source,asciidoc]
....
[docops,adr]
----
title: ADR title
status: Accepted
date: YYYY-MM-DD
context: Context point 1
- Context point 2
decision: Decision point 1
- Decision point 2
consequences: Consequence 1
Consequence 2
participants: Jane Smith (Architect), John Doe (Developer), Alice Johnson (Product Manager)
----
....

The macro processes the JSON configuration and generates an SVG representation of the ADR that is embedded in your document.

[.back-to-top]
<<top, üîù>> 

=== ADR Properties

==== Main Properties

* `title` (required): The main heading of the ADR
* `date` (required): The date when the decision was made
* `status` (required): The status of the decision (Proposed, Accepted, Superseded, Deprecated, or Rejected)
* `context` (required): An array of context statements
* `decision` (required): An array of decision statements
* `consequences` (required): An array of consequence statements
* `participants` (optional): An array of participant names
* `references` (optional): A list of wiki-style links to related resources

==== References Section

The `references` field allows you to include wiki-style links to related resources. These links will be displayed in a dedicated "References" section after the participants section. Wiki-style links use the format +[[url label]]+ where "url" is the target URL and "label" is the display text for the link.

You can format references in two ways:

1. **Single line with multiple links**:
+
[source]
----
references: [[https://example.com/architecture Architecture Overview]], [[https://example.com/standards Coding Standards]]
----

2. **Multiple lines**:
+
[source]
----
references:
[[https://example.com/architecture Architecture Overview]]
[[https://example.com/standards Coding Standards]]
[[https://example.com/patterns Design Patterns]]
----

The references will be displayed as clickable links in the ADR visualization.

[.back-to-top]
<<top, üîù>> 

==== Multiline Participants

The `participants` field supports multiline formatting, allowing you to list participants on separate lines for better readability. This is particularly useful when you have many participants or when participant names include roles or other information.

You can format participants in two ways:

1. **Single line with commas**:
+
[source]
----
participants: Jane Smith (Architect), John Doe (Developer), Alice Johnson (Product Manager)
----

2. **Multiple lines**:
+
[source]
----
participants:
Jane Smith (Architect),
John Doe (Developer),
Alice Johnson (Product Manager)
----
+
Or:
+
[source]
----
participants:
Jane Smith (Architect)
John Doe (Developer)
Alice Johnson (Product Manager)
----

Both formats will be correctly parsed and displayed in the ADR visualization.

[.back-to-top]
<<top, üîù>> 

==== Structured Participant Format

The ADR extension now supports a structured format for participants using pipe separators. This allows you to specify additional information for each participant in a structured way.

The format is:

[source]
----
Name | title | email | color | emoji
----

Where:

* `Name` (required): The participant's name
* `title` (optional): The participant's title or role
* `email` (optional): The participant's email address
* `color` (optional): A custom color for the participant's icon (hex code)
* `emoji` (optional): A custom emoji character to represent the participant (defaults to üë§ if not specified)

Examples:

[source]
----
participants: Jane Smith | Architect | jane.smith@example.com | #4B5563
----

With a custom emoji:

[source]
----
participants: Jane Smith | Architect | jane.smith@example.com | #4B5563 | üë©‚Äçüíª
----

Or with multiple participants and different emojis:

[source]
----
participants:
John Doe | Developer | john.doe@example.com | #10B981 | üë®‚Äçüíª
Jane Smith | Architect | jane.smith@example.com | #6366F1 | üèóÔ∏è
Alice Johnson | Product Manager | alice.johnson@example.com | #F59E0B | üìä
----

[NOTE]
====
* If you omit any optional parameters, you can still include the pipe separators:
+
[source]
----
participants: John Doe | Developer | | #10B981 |
----

* If you don't specify a color, a default color will be used based on the ADR status.
* If you don't specify an emoji, the default üë§ will be used.
* You can use any standard emoji character, including composite emojis like üë©‚Äçüíª or üë®‚Äçüî¨.
* The structured format uses emoji icons instead of the traditional person icons.
* Both the traditional format and the structured format are supported for backward compatibility.
====

[.back-to-top]
<<top, üîù>> 

==== Interactive Participants

The participants section includes several interactive features to enhance collaboration:

1. **Hover Effects**: When you hover over a participant, a subtle glow effect is applied to highlight the participant.

2. **Email Detection**: The system automatically detects email addresses in participant information. You can specify emails in two ways:
+
Using the traditional format:
+
[source]
----
participants: Jane Smith (jane.smith@example.com), John Doe (john.doe@example.com)
----
+
Or using the structured format:
+
[source]
----
participants: Jane Smith | Architect | jane.smith@example.com | #4B5563
----

3. **Microsoft Teams Chat Links**: Participants with email addresses are automatically linked to Microsoft Teams chat. Clicking on a participant with an email will open a new Teams chat with that person.

4. **Group Chat Link**: When two or more participants have email addresses, a "Start Group Chat" link appears in the participants section. Clicking this link will open a Microsoft Teams group chat with all participants who have email addresses.

[TIP]
====
To make the most of these interactive features:

* Include email addresses either:
** In parentheses after participant names: `Name (email@example.com)`
** Or in the structured format: `Name | Title | email@example.com | color`
* For organization-specific Teams integration, ensure you're using the correct email domain
* The structured format provides more control over the participant's appearance and information
====

==== Status Options

[TIP]
====
The `status` property can have one of the following values:

* `Proposed`: Indicates a decision that is being considered (blue)
* `Accepted`: Indicates a decision that has been approved (green)
* `Superseded`: Indicates a decision that has been replaced by a newer decision (amber)
* `Deprecated`: Indicates a decision that is no longer relevant (red)
* `Rejected`: Indicates a decision that was not approved (dark red)
====

[.back-to-top]
<<top, üîù>>

=== Wiki Style Links

The ADR extension supports wiki style links in all text fields. This allows you to add hyperlinks to external resources or internal references within your ADRs.

==== Wiki Style Link Syntax

To add a wiki style link, use the following syntax:

[source]
----
[[URL LABEL]]
----

Where:

* `URL` is the full URL of the linked resource
* `LABEL` is the text that will be displayed and linked

For example:

[source]
----
[[https://www.example.com Example Website]]
----

This will render as a clickable link with "Example Website" as the visible text.

==== Examples of Wiki Style Links in ADRs

Wiki style links can be used in any text field of an ADR, including:

* Context points
* Decision points
* Consequences
* Participant information
* The dedicated references section

Example usage in a decision point:

[source]
----
- We will use [[https://kubernetes.io/ Kubernetes]] for container orchestration
----

Example usage in a context point:

[source]
----
- Our current architecture is described in [[https://internal-wiki.example.com/architecture Architecture Wiki]]
----

[TIP]
====
Wiki style links are particularly useful for:

* Linking to technical documentation
* Referencing design documents
* Pointing to standards or best practices
* Connecting to related ADRs
====

[.back-to-top]
<<top, üîù>>

[[Examples]]
== Examples

=== Basic ADR Example

Here's a simple example of an Architecture Decision Record:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr1.txt[]
----
....

.Use Elasticsearch for Search Functionality
[docops,adr,useDark=false,role=center]
----
include::data/adr1.txt[]
----

[.back-to-top]
<<top, üîù>>


=== Dark Mode ADR Example

You can create dark mode ADRs by setting the `useDark` parameter to `true`:

[source,asciidoc]
....
[docops,adr,useDark=true,role=center]
----
include::data/adr2.txt[]
----
....

.Adopt Microservices Architecture
[docops,adr,useDark=true,role=center,controls="true"]
----
include::data/adr2.txt[]
----

[.back-to-top]
<<top, üîù>>


=== Proposed Status ADR Example

This example shows an ADR with "Proposed" status:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr3.txt[]
----
....

.Implement GraphQL API Layer
[docops,adr,useDark=false,role=center]
----
include::data/adr3.txt[]
----

[.back-to-top]
<<top, üîù>>

=== Rejected Status ADR Example

This example shows an ADR with "Rejected" status:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr4.txt[]
----
....

.Migrate Database to NoSQL Solution
[docops,adr,useDark=false,role=center]
----
include::data/adr4.txt[]
----

[.back-to-top]
<<top, üîù>>

=== Superseded Status ADR Example

This example shows an ADR with "Superseded" status:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr5.txt[]
----
....

.Use JWT for Authentication
[docops,adr,useDark=false,role=center]
----
include::data/adr5.txt[]
----

[.back-to-top]
<<top, üîù>>

=== Deprecated Status ADR Example

This example shows an ADR with "Deprecated" status:

[source,asciidoc]
....
[docops,adr,useDark=true,role=center]
----
include::data/adr6.txt[]
----
....

.Use Server-Side Rendering for Web Application
[docops,adr,useDark=true,role=center]
----
include::data/adr6.txt[]
----

[.back-to-top]
<<top, üîù>>

=== Multiline Participants Example

This example demonstrates how to format participants on multiple lines for better readability and showcases the interactive participant features:

[NOTE]
====
This example includes email addresses for all participants, which will:

* Automatically create Microsoft Teams chat links for each participant
* Add a "Start Group Chat" link at the top of the participants section
* Enable the hover glow effect on participants

When viewing the rendered ADR, you can hover over participants to see the glow effect and click on them to start a Teams chat.
====

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr7.txt[]
----
....

.Implement Data Lake Architecture
[docops,adr,useDark=false,role=center]
----
include::data/adr7.txt[]
----

[.back-to-top]
<<top, üîù>>

=== Structured Participants Example

This example demonstrates the new structured format for participants with custom emojis, titles, emails, and colors:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr8.txt[]
....

.Adopt Cloud-Native CI/CD Pipeline
[docops,adr,useDark=false,role=center]
----
include::data/adr8.txt[]
----

[.back-to-top]
<<top, üîù>>

=== References Section Example

This example demonstrates how to include references in your ADR:

[source,asciidoc]
....
[docops,adr,useDark=false,role=center]
----
include::data/adr9.txt[]
----
....

.Adopt GraphQL for API Layer
[docops,adr,useDark=false,role=center]
----
include::data/adr9.txt[]
----

[.back-to-top]
<<top, üîù>>

== Conclusion

The DocOps ADR Extension provides a powerful way to enhance your AsciiDoctor documents with visually appealing architecture decision records. By using the JSON configuration format, you can create customized ADRs that document important architectural decisions in your projects.

The extension supports various status types and display options, including dark mode, making it versatile for different documentation needs.
